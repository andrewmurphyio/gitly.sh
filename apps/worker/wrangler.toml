name = "gitly-sh"
main = "src/index.ts"
compatibility_date = "2025-02-01"

# Production route
routes = [
  { pattern = "gitly.sh", custom_domain = true }
]

# KV namespace for link storage (fast redirects)
# Create with: wrangler kv:namespace create LINKS
[[kv_namespaces]]
binding = "LINKS"
id = "$KV_NAMESPACE_ID"

# D1 database for analytics and admin queries
[[d1_databases]]
binding = "DB"
database_name = "gitlysh"
database_id = "1e16ea5f-2890-4d1b-99a3-31f50925fe31"

# Environment variables (set via wrangler secret)
# ANALYTICS_API_KEY - API key for analytics export endpoint

# Observability configuration
# https://developers.cloudflare.com/workers/observability/
[observability]
enabled = false

[observability.logs]
enabled = true
persist = true
invocation_logs = true

[observability.traces]
enabled = false
